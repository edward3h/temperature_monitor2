/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Groovy project to get you started.
 * For more details take a look at the Groovy Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.5.1/userguide/tutorial_groovy_projects.html
 */

plugins {
	// Apply the groovy plugin to add support for Groovy
	id 'groovy'

	// Apply the application plugin to add support for building a CLI application.
	id 'application'

	// spotless formatting
	id 'com.diffplug.spotless' version '5.0.0'
}

repositories {
	// Use jcenter for resolving dependencies.
	// You can declare any Maven/Ivy/file repository here.
	jcenter()
}

dependencies {
	// Use the latest Groovy version for building this library
	implementation 'org.codehaus.groovy:groovy-all:3.0.5'

	implementation group: 'org.xerial', name: 'sqlite-jdbc', version: '3.8.6'

	implementation 'io.github.cdimascio:java-dotenv:5.2.1'
	// https://mvnrepository.com/artifact/com.sun.mail/javax.mail
	implementation group: 'com.sun.mail', name: 'javax.mail', version: '1.6.2'

	testImplementation 'org.spockframework:spock-core:2.0-M3-groovy-3.0'
}

test {
	useJUnitPlatform()
}

application {
	// Define the main class for the application.
	mainClassName = 'org.ethelred.temperature_monitor2.App'
}

task installGitHooks(type:Exec) {
	commandLine "hooks/setup.sh"
}
compileJava.dependsOn installGitHooks

spotless {
	groovy {
		importOrderFile('spotless.importorder')

		greclipse('4.13.0').configFile('spotless.eclipse.xml', 'org.codehaus.groovy.eclipse.ui.prefs')
		licenseHeader '/* (C) $YEAR Edward Harman */'
	}
	groovyGradle {
		greclipse()
	}
}

distributions {
	main {
		contents {
			from file(".env")
		}
	}
}
